@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   POSEIDON - Dark & Moody Premium Theme
   ============================================ */

@layer base {
    * {
        border-color: rgba(255, 255, 255, 0.08);
    }

    html {
        font-feature-settings: "rlig" 1, "calt" 1, "cv02" 1, "cv03" 1, "cv04" 1;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        color-scheme: dark;
    }

    body {
        @apply bg-surface text-text-primary font-sans antialiased;
        font-feature-settings: "rlig" 1, "calt" 1;
    }

    /* Selection styling — brand glow */
    ::selection {
        background: rgba(99, 102, 241, 0.3);
        color: #FAFAFA;
    }

    /* Custom scrollbar — dark */
    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 9999px;
        transition: background 0.2s ease;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .thin-scrollbar::-webkit-scrollbar {
        width: 4px;
    }
}

@layer components {
    /* ============================================
       Glass Morphism — Dark
       ============================================ */

    .glass-panel {
        @apply bg-[#111113]/80 backdrop-blur-2xl border-r border-white/[0.06];
        box-shadow: 1px 0 0 0 rgba(255, 255, 255, 0.03), 4px 0 24px -4px rgba(0, 0, 0, 0.3);
    }

    .glass-card {
        @apply bg-white/[0.04] backdrop-blur-2xl rounded-2xl border border-white/[0.08];
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2), 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .glass-elevated {
        @apply bg-white/[0.04] backdrop-blur-2xl rounded-2xl border border-white/[0.08];
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 8px 24px rgba(0, 0, 0, 0.3), 0 24px 48px rgba(0, 0, 0, 0.2);
    }

    /* ============================================
       Interactive Elements
       ============================================ */

    .interactive {
        @apply transition-all duration-200 ease-smooth;
    }

    .interactive-scale {
        @apply transition-all duration-200 ease-smooth active:scale-[0.98];
    }

    .interactive-lift {
        @apply transition-all duration-200 ease-smooth;
    }

    .interactive-lift:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    /* ============================================
       Navigation Items
       ============================================ */

    .nav-item {
        @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium
               text-text-secondary transition-all duration-200 ease-smooth
               hover:bg-white/[0.06] hover:text-text-primary;
    }

    .nav-item-active {
        @apply bg-brand-muted text-brand-light font-semibold;
    }

    .nav-item-active .nav-icon {
        @apply text-brand;
    }

    /* ============================================
       Buttons
       ============================================ */

    .btn-primary {
        @apply bg-brand text-white font-semibold rounded-xl px-4 py-2.5
               transition-all duration-200 ease-smooth
               hover:bg-brand-dark hover:shadow-glow
               active:scale-[0.98] active:shadow-none;
    }

    .btn-secondary {
        @apply bg-white/[0.06] text-text-primary font-medium rounded-xl px-4 py-2.5
               border border-white/[0.08] transition-all duration-200 ease-smooth
               hover:bg-white/[0.1] hover:border-white/[0.12]
               active:scale-[0.98];
    }

    .btn-ghost {
        @apply text-text-secondary font-medium rounded-xl px-4 py-2.5
               transition-all duration-200 ease-smooth
               hover:bg-white/[0.06] hover:text-text-primary
               active:scale-[0.98];
    }

    .btn-icon {
        @apply flex items-center justify-center w-9 h-9 rounded-xl
               text-text-secondary transition-all duration-200 ease-smooth
               hover:bg-white/[0.06] hover:text-text-primary
               active:scale-[0.95];
    }

    /* ============================================
       Input Fields
       ============================================ */

    .input-field {
        @apply w-full bg-white/[0.05] border border-white/[0.08] rounded-xl px-4 py-3
               text-text-primary placeholder:text-text-tertiary
               transition-all duration-200 ease-smooth
               focus:outline-none focus:border-brand/40 focus:ring-1 focus:ring-brand/30 focus:bg-white/[0.08]
               hover:border-white/[0.12];
    }

    .input-large {
        @apply text-lg py-4 px-5 rounded-2xl;
    }

    /* ============================================
       Cards and Containers
       ============================================ */

    .card {
        @apply bg-white/[0.03] rounded-2xl border border-white/[0.06] p-4;
    }

    .card-elevated {
        @apply bg-white/[0.04] rounded-2xl border border-white/[0.08] p-4;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.15);
    }

    .card-interactive {
        @apply card cursor-pointer transition-all duration-200 ease-smooth
               hover:border-white/[0.12] hover:bg-white/[0.05];
    }

    /* ============================================
       Status Indicators
       ============================================ */

    .status-dot {
        @apply w-2 h-2 rounded-full;
    }

    .status-ready {
        @apply bg-success;
        box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
    }

    .status-running {
        @apply bg-brand animate-pulse-soft;
        box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
    }

    .status-error {
        @apply bg-error;
        box-shadow: 0 0 8px rgba(239, 68, 68, 0.4);
    }

    /* ============================================
       Keyboard Shortcuts
       ============================================ */

    .kbd {
        @apply inline-flex items-center justify-center px-1.5 py-0.5
               text-[10px] font-medium text-text-tertiary
               bg-white/[0.06] border border-white/[0.08] rounded-md;
    }

    /* ============================================
       Badges and Tags
       ============================================ */

    .badge {
        @apply inline-flex items-center px-2 py-0.5 rounded-md
               text-xs font-medium;
    }

    .badge-brand {
        @apply bg-brand-muted text-brand-light;
    }

    .badge-success {
        @apply bg-success/10 text-success;
    }

    .badge-warning {
        @apply bg-warning/10 text-warning;
    }

    .badge-error {
        @apply bg-error/10 text-error;
    }

    /* ============================================
       Dividers
       ============================================ */

    .divider {
        @apply h-px bg-white/[0.06];
    }

    .divider-vertical {
        @apply w-px bg-white/[0.06];
    }

    /* ============================================
       Loading States
       ============================================ */

    .skeleton {
        @apply bg-gradient-to-r from-white/[0.04] via-white/[0.08] to-white/[0.04]
               bg-[length:200%_100%] animate-shimmer rounded-lg;
    }

    .loading-spinner {
        @apply w-5 h-5 border-2 border-white/[0.1] border-t-brand rounded-full animate-spin;
    }

    /* ============================================
       Tooltips
       ============================================ */

    .tooltip {
        @apply absolute z-50 px-2.5 py-1.5 text-xs font-medium
               bg-surface-elevated text-text-primary rounded-lg shadow-medium border border-white/[0.08]
               opacity-0 pointer-events-none transition-opacity duration-200;
    }

    .tooltip-visible {
        @apply opacity-100;
    }
}

@layer utilities {
    /* ============================================
       Text Utilities
       ============================================ */

    .text-balance {
        text-wrap: balance;
    }

    .text-gradient {
        @apply bg-clip-text text-transparent;
    }

    .text-gradient-brand {
        @apply text-gradient bg-gradient-to-r from-brand to-accent-violet;
    }

    .text-gradient-subtle {
        @apply text-gradient bg-gradient-to-r from-text-primary to-text-secondary;
    }

    /* ============================================
       Background Utilities
       ============================================ */

    /* Dark mesh gradient */
    .bg-mesh-dark {
        background-color: #0A0A0B;
        background-image:
            radial-gradient(at 0% 0%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
            radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.06) 0%, transparent 50%),
            radial-gradient(at 50% 100%, rgba(16, 185, 129, 0.04) 0%, transparent 50%);
    }

    /* Noise texture overlay */
    .bg-noise {
        position: relative;
    }

    .bg-noise::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        opacity: 0.015;
        pointer-events: none;
    }

    /* ============================================
       Border Utilities
       ============================================ */

    .border-gradient {
        border: 1px solid transparent;
        background:
            linear-gradient(#111113, #111113) padding-box,
            linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3)) border-box;
    }

    /* ============================================
       Focus Utilities
       ============================================ */

    .focus-ring {
        @apply focus:outline-none focus:ring-2 focus:ring-brand/30 focus:ring-offset-2 focus:ring-offset-surface;
    }

    .focus-ring-inset {
        @apply focus:outline-none focus:ring-2 focus:ring-brand/30 focus:ring-inset;
    }

    /* ============================================
       Animation Utilities
       ============================================ */

    .animate-in {
        animation: fadeInUp 0.4s ease-out forwards;
    }

    .animate-out {
        animation: fadeInUp 0.3s ease-out reverse forwards;
    }

    .stagger-1 { animation-delay: 0.05s; }
    .stagger-2 { animation-delay: 0.1s; }
    .stagger-3 { animation-delay: 0.15s; }
    .stagger-4 { animation-delay: 0.2s; }
    .stagger-5 { animation-delay: 0.25s; }

    /* ============================================
       Shadow Utilities
       ============================================ */

    .shadow-brand {
        box-shadow: 0 4px 14px -4px rgba(99, 102, 241, 0.4);
    }

    .shadow-brand-lg {
        box-shadow: 0 8px 24px -4px rgba(99, 102, 241, 0.5);
    }

    /* ============================================
       Layout Utilities
       ============================================ */

    .safe-area-inset {
        padding-top: env(safe-area-inset-top);
        padding-right: env(safe-area-inset-right);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
    }

    /* macOS traffic light spacing */
    .traffic-light-padding {
        padding-left: 78px;
    }

    /* ============================================
       Transition Utilities
       ============================================ */

    .transition-default {
        @apply transition-all duration-200 ease-smooth;
    }

    .transition-slow {
        @apply transition-all duration-300 ease-smooth;
    }

    .transition-fast {
        @apply transition-all duration-150 ease-smooth;
    }
}

/* ============================================
   Special Effects
   ============================================ */

/* Glow effect for focused command bar */
.command-bar-glow {
    position: relative;
}

.command-bar-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15));
    border-radius: inherit;
    filter: blur(20px);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.command-bar-glow:focus-within::before {
    opacity: 1;
}

/* Typing cursor animation */
@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

.cursor-blink {
    animation: blink 1s step-end infinite;
}

/* Smooth page transitions */
.page-transition-enter {
    opacity: 0;
    transform: translateY(8px);
}

.page-transition-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.page-transition-exit {
    opacity: 1;
    transform: translateY(0);
}

.page-transition-exit-active {
    opacity: 0;
    transform: translateY(-8px);
    transition: opacity 0.2s ease, transform 0.2s ease;
}
